{# Projet TPI - Fabrice Maillefer #}
<form 
{% if not only_form %}
	action="{{ path('ligne_update', { 'id': entity.id }) }}"
{% else %}
	action="javascript:submitForm('form_ligne_{{ entity.id }}','{{ path('ligne_update', { 'id': entity.id }) }}')" id="form_ligne_{{ entity.id }}"
	
{% endif %}
 method="post" role="form" class="form-inline" {{ form_enctype(edit_form) }}>
	<input type="hidden" name="_method" value="PUT" />
    {{ form_widget(edit_form) }}
    {% if not only_form %}
        <p>
        	<button class="btn btn-primary" type="submit">Enregistrer</button>
		</p>
	{% else %}
		<div style="float:right;" >
			<div id="form_ligne_{{ entity.id }}_status"></div>
		</div>
		<script type="text/javascript">
		$("#form_ligne_{{ entity.id }}").on("focusout focusin", "input", function(e){
	        if ( e.type == "focusout" ) {
	            $("#form_ligne_{{ entity.id }}").attr("form-blur-timeout", window.setTimeout(function(){
	            	$("#form_ligne_{{ entity.id }}").submit();
	            }, 100));
	            
	        } else {
	            window.clearTimeout($("#form_ligne_{{ entity.id }}").attr("form-blur-timeout"));
	            $("#form_ligne_{{ entity.id }}_status").html("");
	        }
	    });
	    </script>
	{% endif %}
</form>